<script setup lang="ts" name="menus">
import type { FormItem } from "@/components/Form.vue";
import DeleteModal from "@/components/modal/DeleteModal.vue";
import EditAddModal from "@/components/modal/EditAddModal.vue";

const deleteShow = ref(false);
const editShow = ref(false);

// Ê®°ÊÄÅÊ°ÜÁöÑÊéßÂà∂handler
const msg = ref("Êñ∞Â¢û");

// let localType = "";

const formSchema = [
  {
    field: "ËèúÂçïÂêç",
    type: "input",
    prop: "name",
    value: "",
    attr: {
      placeholder: "ËØ∑ËæìÂÖ•ËèúÂçïÂêçÁß∞",
    },
  },
  {
    field: "ËèúÂçïË∑ØÂæÑ",
    type: "input",
    prop: "path",
    value: "",
    attr: {
      placeholder: "ËØ∑ËæìÂÖ•ËèúÂçïË∑ØÂæÑ",
    },
  },
  {
    field: "ËèúÂçïÊéíÂ∫è",
    type: "input",
    prop: "order",
    value: "",
    attr: {
      placeholder: "ËØ∑ËæìÂÖ•ËèúÂçïÊéíÂ∫è",
    },
  },
  {
    field: "ÂÖÅËÆ∏ÁöÑÊìç‰ΩúÁ≠ñÁï•",
    type: "checkbox",
    prop: "roles",
    value: [],
    children: [
      {
        value: 1,
        field: "CREATE",
      },
      {
        value: 2,
        field: "UPDATE",
      },
      {
        value: 3,
        field: "DELETE",
      },
      {
        value: 4,
        field: "READ",
      },
      {
        value: 5,
        field: "MANAGE",
      },
    ],
  },
] as FormItem[];

const deleteSubmit = () => {
  console.log("delete");
};

// ÊéßÂà∂Ê®°ÊÄÅÊ°Ü
const openModal = (type: string) => {
  // localType = type;
  // console.log(item);
  if (type === "delete") {
    deleteShow.value = true;
  } else if (type === "edit") {
    msg.value = "ÁºñËæë";
    editShow.value = true;
  } else if (type === "add") {
    msg.value = "Êñ∞Â¢û";
    editShow.value = true;
  }
};

const editSubmit = async (val: any) => {
  console.log("üöÄ ~ file: index.vue ~ line 221 ~ editSubmit ~ val", val);
};
</script>

<template>
  <div>
    <div>
      <div class="mb-3">
        <button type="button" class="btn btn-primary px-3" @click="openModal('add')">
          <i class="fas fa-plus" />Êñ∞Â¢û
        </button>
      </div>
      <table class="table table-bordered table-hover table-striped">
        <thead>
          <tr>
            <th scope="col">
              #
            </th>
            <th scope="col">
              ËèúÂçïÂêçÁß∞
            </th>
            <th scope="col">
              ËèúÂçïË∑ØÂæÑ
            </th>
            <th scope="col">
              ÊéíÂ∫è
            </th>
            <th scope="col">
              Êìç‰ΩúÁ≠ñÁï•
            </th>
            <th scope="col">
              Êìç‰Ωú
            </th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td>È¶ñÈ°µ</td>
            <td>/dashboard</td>
            <td>1</td>
            <td>READ,UPDATE</td>
            <td>
              <button type="button" class="btn btn-secondary px-3" @click="openModal('edit')">
                <i class="far fa-edit me-2" />ÁºñËæë
              </button>
              <button type="button" class="btn btn-danger px-3 ms-3" @click="openModal('delete')">
                <i class="far fa-trash-alt me-2" />Âà†Èô§
              </button>
            </td>
          </tr>
        </tbody>
      </table>
      <nav aria-label="Page navigation example">
        <ul class="pagination">
          <li class="page-item">
            <a class="page-link" href="#">Previous</a>
          </li>
          <li class="page-item">
            <a class="page-link" href="#">1</a>
          </li>
          <li class="page-item">
            <a class="page-link" href="#">2</a>
          </li>
          <li class="page-item">
            <a class="page-link" href="#">3</a>
          </li>
          <li class="page-item">
            <a class="page-link" href="#">Next</a>
          </li>
        </ul>
      </nav>
    </div>
    <DeleteModal v-model:show="deleteShow" @delete="deleteSubmit" />
    <EditAddModal v-model:show="editShow" :schema="formSchema" :msg="msg" @submit="editSubmit" />
  </div>
</template>

<style lang="scss" scoped>
</style>
